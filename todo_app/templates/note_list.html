{% extends 'todo_app/main.html' %}
{% load static %}

{% block content %}

<div class="header-bar">
    <div class="header-left">
        <h1 class="text-3xl font-extrabold text-gray-900 tracking-tight">üìù My Notes</h1>
        <p class="text-sm text-gray-500 mt-1">Organize your study materials and thoughts.</p>
    </div>
    <div class="header-right">
        <!-- Button to Add New Note -->
        <a href="{% url 'note-create' %}" class="action-button bg-purple-600 hover:bg-purple-700">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />
            </svg>
            New Note
        </a>
    </div>
</div>

<!-- Search and Filter Bar -->
<form method="GET" class="search-bar">
    <input type="text" name="search-area" value="{{ search_input }}" placeholder="Search notes by title..." class="search-input">
    <button type="submit" class="search-button">Search</button>
</form>

{% if notes|length == 0 %}
<div class="no-items-message">
    <p>You haven't created any notes yet.</p>
    <a href="{% url 'note-create' %}" class="text-purple-600 hover:text-purple-700 font-medium mt-2 block">
        Click here to start your first note!
    </a>
</div>
{% endif %}

<!-- Notes List Container -->
<div class="notes-grid">
    {% for note in notes %}
    <div class="note-card transition duration-200 ease-in-out">
        <div class="note-title-wrap">
            <h2 class="note-title">
                <a href="{% url 'note-detail' note.id %}" class="hover:text-purple-600 transition duration-150">
                    {{ note.title|truncatechars:35 }}
                </a>
            </h2>
            <div class="note-actions">
                <!-- Edit Button -->
                <a href="{% url 'note-update' note.id %}" class="edit-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zm-5.646 7.05a1 1 0 00-1.06 1.06l1.242 4.97a1 1 0 001.956.16l4.47-4.47-2.828-2.828-1.78 1.78z" />
                    </svg>
                </a>
                <!-- Delete Button (uses a separate page for confirmation, hence the full link) -->
                <a href="{% url 'note-delete' note.id %}" class="delete-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                    </svg>
                </a>
            </div>
        </div>
        
        <p class="note-content-preview">
            <!-- Display a small preview of the content -->
            {{ note.content|truncatechars:100 }}
        </p>

        <div class="note-date text-xs text-gray-400 mt-3 border-t border-gray-100 pt-2">
            Created: {{ note.created_at|date:"d M Y, H:i" }}
        </div>
    </div>
    {% endfor %}
</div>

{% endblock content %}