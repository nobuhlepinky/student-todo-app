{% extends 'todo_app/main.html' %}
{% load static %}

{% block content %}

<!-- Determine if we are Creating or Updating for dynamic title -->
{% if form.instance.pk %}
    {% with title='Edit Note' icon='<path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zm-5.646 7.05a1 1 0 00-1.06 1.06l1.242 4.97a1 1 0 001.956.16l4.47-4.47-2.828-2.828-1.78 1.78z" />' %}
    {% endwith %}
{% else %}
    {% with title='Create New Note' icon='<path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />' %}
    {% endwith %}
{% endif %}

<div class="header-bar mb-6">
    <a href="{% url 'notes' %}" class="back-link">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
        </svg>
        Back to Notes
    </a>
</div>

<div class="card-body p-8 max-w-2xl mx-auto shadow-xl">
    <h1 class="text-3xl font-extrabold text-gray-900 mb-6 flex items-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 mr-3 text-purple-600" viewBox="0 0 20 20" fill="currentColor">
            {{ icon|safe }}
        </svg>
        {{ title }}
    </h1>

    <form method="POST">
        {% csrf_token %}

        <div class="mb-5">
            <label for="{{ form.title.id_for_label }}" class="form-label">Note Title:</label>
            {{ form.title }}
            {% if form.title.errors %}
                <p class="text-red-500 text-sm mt-1">{{ form.title.errors }}</p>
            {% endif %}
        </div>

        <div class="mb-5">
            <label for="{{ form.content.id_for_label }}" class="form-label">Content:</label>
            {{ form.content }}
            {% if form.content.errors %}
                <p class="text-red-500 text-sm mt-1">{{ form.content.errors }}</p>
            {% endif %}
        </div>

        <button type="submit" class="action-button bg-purple-600 hover:bg-purple-700 w-full mt-4">
            {% if form.instance.pk %}
                Save Changes
            {% else %}
                Create Note
            {% endif %}
        </button>
    </form>
</div>

{% endblock content %}